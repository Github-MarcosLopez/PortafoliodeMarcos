"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react/jsx-runtime");function _interopNamespaceDefault(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(o){if("default"!==o){var n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var t=_interopNamespaceDefault(require("react"));const o={"center bottom":"0.5x1","center center":"0.5x0.5","center top":"0.5x0","left bottom":"0x1","left center":"0x0.5","left top":"0x0","right bottom":"1x1","right center":"1x0.5","right top":"1x0",bottom:"bottom",center:"0.5x0.5",left:"left",right:"right",top:"top"},numberToHex$1=e=>("0"+Number(e).toString(16)).slice(-2).toUpperCase(),n={"center bottom":"south","center center":"center","center top":"north","left bottom":"south_west","left center":"west","left top":"north_west","right bottom":"south_east","right center":"east","right top":"north_east",bottom:"south",center:"center",left:"west",right:"east",top:"north"},numberToHex=e=>("0"+Number(e).toString(16)).slice(-2).toUpperCase();var i={},strictUriEncode=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),a="%[a-f0-9]{2}",s=new RegExp("("+a+")|([^%]+?)","gi"),c=new RegExp("("+a+")+","gi");function decodeComponents(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var o=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],decodeComponents(o),decodeComponents(n))}function decode(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(s)||[],o=1;o<t.length;o++)t=(e=decodeComponents(t,o).join("")).match(s)||[];return e}}var decodeUriComponent=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function customDecodeURIComponent(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},o=c.exec(e);o;){try{t[o[0]]=decodeURIComponent(o[0])}catch(e){var n=decode(o[0]);n!==o[0]&&(t[o[0]]=n)}o=c.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),a=0;a<i.length;a++){var s=i[a];e=e.replace(new RegExp(s,"g"),t[s])}return e}(e)}},splitOnFirst=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const o=e.indexOf(t);return-1===o?[e]:[e.slice(0,o),e.slice(o+t.length)]},filterObj=function(e,t){for(var o={},n=Object.keys(e),i=Array.isArray(t),a=0;a<n.length;a++){var s=n[a],c=e[s];(i?-1!==t.indexOf(s):t(s,c,e))&&(o[s]=c)}return o};!function(e){const t=strictUriEncode,o=decodeUriComponent,n=splitOnFirst,i=filterObj,a=Symbol("encodeFragmentIdentifier");function validateArrayFormatSeparator(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function encode(e,o){return o.encode?o.strict?t(e):encodeURIComponent(e):e}function decode(e,t){return t.decode?o(e):e}function keysSorter(e){return Array.isArray(e)?e.sort():"object"==typeof e?keysSorter(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function removeHash(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function extract(e){const t=(e=removeHash(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function parseValue(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function parse(e,t){validateArrayFormatSeparator((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const o=function parserForArrayFormat(e){let t;switch(e.arrayFormat){case"index":return(e,o,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=o):n[e]=o};case"bracket":return(e,o,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],o):n[e]=[o]:n[e]=o};case"colon-list-separator":return(e,o,n)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],o):n[e]=[o]:n[e]=o};case"comma":case"separator":return(t,o,n)=>{const i="string"==typeof o&&o.includes(e.arrayFormatSeparator),a="string"==typeof o&&!i&&decode(o,e).includes(e.arrayFormatSeparator);o=a?decode(o,e):o;const s=i||a?o.split(e.arrayFormatSeparator).map((t=>decode(t,e))):null===o?o:decode(o,e);n[t]=s};case"bracket-separator":return(t,o,n)=>{const i=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!i)return void(n[t]=o?decode(o,e):o);const a=null===o?[]:o.split(e.arrayFormatSeparator).map((t=>decode(t,e)));void 0!==n[t]?n[t]=[].concat(n[t],a):n[t]=a};default:return(e,t,o)=>{void 0!==o[e]?o[e]=[].concat(o[e],t):o[e]=t}}}(t),i=Object.create(null);if("string"!=typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;for(const a of e.split("&")){if(""===a)continue;let[e,s]=n(t.decode?a.replace(/\+/g," "):a,"=");s=void 0===s?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?s:decode(s,t),o(decode(e,t),s,i)}for(const e of Object.keys(i)){const o=i[e];if("object"==typeof o&&null!==o)for(const e of Object.keys(o))o[e]=parseValue(o[e],t);else i[e]=parseValue(o,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce(((e,t)=>{const o=i[t];return Boolean(o)&&"object"==typeof o&&!Array.isArray(o)?e[t]=keysSorter(o):e[t]=o,e}),Object.create(null))}e.extract=extract,e.parse=parse,e.stringify=(e,t)=>{if(!e)return"";validateArrayFormatSeparator((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const shouldFilter=o=>t.skipNull&&null==e[o]||t.skipEmptyString&&""===e[o],o=function encoderForArrayFormat(e){switch(e.arrayFormat){case"index":return t=>(o,n)=>{const i=o.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?o:null===n?[...o,[encode(t,e),"[",i,"]"].join("")]:[...o,[encode(t,e),"[",encode(i,e),"]=",encode(n,e)].join("")]};case"bracket":return t=>(o,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?o:null===n?[...o,[encode(t,e),"[]"].join("")]:[...o,[encode(t,e),"[]=",encode(n,e)].join("")];case"colon-list-separator":return t=>(o,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?o:null===n?[...o,[encode(t,e),":list="].join("")]:[...o,[encode(t,e),":list=",encode(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return o=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:(i=null===i?"":i,0===n.length?[[encode(o,e),t,encode(i,e)].join("")]:[[n,encode(i,e)].join(e.arrayFormatSeparator)])}default:return t=>(o,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?o:null===n?[...o,encode(t,e)]:[...o,[encode(t,e),"=",encode(n,e)].join("")]}}(t),n={};for(const t of Object.keys(e))shouldFilter(t)||(n[t]=e[t]);const i=Object.keys(n);return!1!==t.sort&&i.sort(t.sort),i.map((n=>{const i=e[n];return void 0===i?"":null===i?encode(n,t):Array.isArray(i)?0===i.length&&"bracket-separator"===t.arrayFormat?encode(n,t)+"[]":i.reduce(o(n),[]).join("&"):encode(n,t)+"="+encode(i,t)})).filter((e=>e.length>0)).join("&")},e.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[o,i]=n(e,"#");return Object.assign({url:o.split("?")[0]||"",query:parse(extract(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:decode(i,t)}:{})},e.stringifyUrl=(t,o)=>{o=Object.assign({encode:!0,strict:!0,[a]:!0},o);const n=removeHash(t.url).split("?")[0]||"",i=e.extract(t.url),s=e.parse(i,{sort:!1}),c=Object.assign(s,t.query);let p=e.stringify(c,o);p&&(p=`?${p}`);let u=function getHash(e){let t="";const o=e.indexOf("#");return-1!==o&&(t=e.slice(o)),t}(t.url);return t.fragmentIdentifier&&(u=`#${o[a]?encode(t.fragmentIdentifier,o):t.fragmentIdentifier}`),`${n}${p}${u}`},e.pick=(t,o,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[a]:!1},n);const{url:s,query:c,fragmentIdentifier:p}=e.parseUrl(t,n);return e.stringifyUrl({url:s,query:i(c,o),fragmentIdentifier:p},n)},e.exclude=(t,o,n)=>{const i=Array.isArray(o)?e=>!o.includes(e):(e,t)=>!o(e,t);return e.pick(t,i,n)}}(i);class RemixImageError extends Error{errorCode;constructor(e,t){super(e),Object.setPrototypeOf(this,RemixImageError.prototype),this.errorCode=t||500}toString(){return this.message}}class UnsupportedImageError extends RemixImageError{constructor(e){super(e,415),Object.setPrototypeOf(this,UnsupportedImageError.prototype)}}const remixImageLoader=(e,t,o)=>((e,t)=>{const o=t;return Object.prototype.hasOwnProperty.call(t,"crop")&&(o.crop=JSON.stringify(o.crop)),i.stringifyUrl({url:e,query:o},{skipNull:!0,arrayFormat:"bracket",sort:!1})})(t,{src:encodeURI(e),...o}),sizeComparator=(e,t)=>(e.maxWidth||1/0)-(t.maxWidth||1/0),sizeConverter=e=>e.maxWidth?`(max-width: ${e.maxWidth}px) ${e.size.width}px`:`${e.size.width}px`;function useResponsiveImage(e,o,n={},i=[1],a="/api/image",s=remixImageLoader){return t.useMemo((()=>{let t=e.src||"",c=0;const p=[],u=Array.from(new Set([1,..."number"==typeof i?[i]:i])).sort();for(const i of u)for(const{size:u}of o){const o=s(e.src||"",a,{width:"number"==typeof u.width?u.width*i:u.width,height:"number"==typeof u.height?u.height*i:u.height,fit:"cover",position:"center",background:[0,0,0,0],quality:80,compressionLevel:9,loop:0,delay:100,blurRadius:null,rotate:null,flip:null,crop:null,...n});p.push(o+` ${u.width*i}w`),1===i&&u.width>c&&(c=u.width,t=o)}const l=[...o].sort(sizeComparator).map(sizeConverter);return 1===o.length&&null!=o[0].maxWidth&&l.push(`${o[0].size.width}px`),{...p.length>0&&{srcSet:p.join(", "),sizes:l.join(", ")},src:t}}),[e.src,a,s,o,n,i])}const p=t.forwardRef((({loaderUrl:t="/api/image",loader:o=remixImageLoader,responsive:n=[],options:i={},dprVariants:a=1,decoding:s="async",loading:c="lazy",...p},u)=>{const l=useResponsiveImage(p,n,i,a,t,o);return e.jsx("img",{ref:u,decoding:s,loading:c,...p,...l})}));function r(e){var t,o,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(o=r(e[t]))&&(n&&(n+=" "),n+=o);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function clsx(){for(var e,t,o=0,n="";o<arguments.length;)(e=arguments[o++])&&(t=r(e))&&(n&&(n+=" "),n+=t);return n}function handleLoading(e,t,o){if(!e||e["data-loaded-src"]===t)return;e["data-loaded-src"]=t;("decode"in e?e.decode():Promise.resolve()).catch((()=>{})).then((()=>{if(e.parentNode&&(e.style.animationDuration="0.125s",e.classList.remove("blur"),o)){const{naturalWidth:t,naturalHeight:n}=e;o({naturalWidth:t,naturalHeight:n})}}))}p.displayName="BaseImage";const u=t.memo(t.forwardRef((({src:o,loaderUrl:n="/api/image",loader:i=remixImageLoader,responsive:a=[],options:s={},dprVariants:c=1,decoding:p="async",loading:u="lazy",unoptimized:l=!1,placeholder:d="empty",blurDataURL:h=(l||"blur"!==d?null:i(o||"",n,{width:15,height:15,fit:s?.fit||"cover",position:s?.position||"center",contentType:s.contentType})),placeholderAspectRatio:g=null,onLoadingComplete:f,className:m,style:y={},onLoad:b,...x},w)=>{const $=useResponsiveImage({src:o},a,s,c,n,i),v=t.useMemo((()=>{if(l)return y;const e=function computePlaceholderSize(e=[],t){let o=t||1,n=0;for(let i=0;i<e.length;i+=1){const a=e[i].size||{};a.width&&(a.width>n&&(n=a.width),!t&&a.height&&(o=a.height/a.width))}return{width:n,height:Math.round(n*o)}}(a,g);return{minWidth:e.width,minHeight:e.height,backgroundSize:s?.fit||"cover",backgroundPosition:s?.position||"center",...h&&{backgroundImage:`url("${h}")`},...y}}),[l,a,g,y,s?.fit,s?.position,h]);return e.jsx("img",{ref:t.useCallback((e=>{null!=e&&(l||("blur"===d&&e.classList.add("blur"),e?.complete&&handleLoading(e,o,f)),w&&("function"==typeof w?w(e):w.current=e))}),[l,w,o,d,f]),decoding:p,loading:u,style:v,className:clsx(!l&&"remix-image",!l&&"blur"===d&&"blur-in",m),...x,...$,onLoad:e=>{if(!l){handleLoading(e.currentTarget,o,f)}b&&b(e)}})})));var l,d;u.displayName="Image",exports.CacheStatus=void 0,(l=exports.CacheStatus||(exports.CacheStatus={})).HIT="hit",l.STALE="stale",l.MISS="miss";exports.MimeType=void 0,(d=exports.MimeType||(exports.MimeType={})).SVG="image/svg+xml",d.JPEG="image/jpeg",d.PNG="image/png",d.GIF="image/gif",d.WEBP="image/webp",d.BMP="image/bmp",d.TIFF="image/tiff",d.AVIF="image/avif";exports.BaseImage=p,exports.Cache=class Cache{},exports.Image=u,exports.RemixImageError=RemixImageError,exports.UnsupportedImageError=UnsupportedImageError,exports.cloudflareImagesLoader=(e,t,n)=>{const i=[];n.background&&i.push(`background=rgba(${n.background[0]},${n.background[1]},${n.background[2]},${Number(n.background[3]/255).toFixed(2)})`),n.crop&&i.push(`trim=${n.crop.y};${n.crop.x+n.crop.width};${n.crop.height};${n.crop.x}`),n.rotate&&i.push(`rotate=${n.rotate}`),n.blurRadius&&i.push(`blur=${n.blurRadius}`),"outside"===n.fit?(i.push("fit=contain"),n.width&&n.height?(i.push(`width=${Math.max(n.width,n.height)}`),i.push(`height=${Math.max(n.width,n.height)}`)):n.width?i.push(`width=${n.width}`):n.height&&i.push(`height=${n.height}`)):("contain"===n.fit?i.push("fit=pad"):"cover"===n.fit?i.push("fit=cover"):"fill"===n.fit?i.push("fit=fill"):"inside"===n.fit&&i.push("fit=contain"),n.width&&i.push(`width=${n.width}`),n.height&&i.push(`height=${n.height}`)),n.position&&i.push(`gravity=${o[n.position]||"0.5x0.5"}`),n.quality&&i.push(`quality=${n.quality}`);return`/cdn-cgi/image/${i.join(",")}/${(e=>e.startsWith("/")?e.slice(1):e)(e)}`},exports.cloudinaryLoader=(e,t,o)=>{const i=[];o.background&&i.push(`b_${numberToHex$1(o.background[0])+numberToHex$1(o.background[1])+numberToHex$1(o.background[2])+numberToHex$1(o.background[3])}`),o.crop&&(i.push("c_crop"),i.push("g_north_west"),i.push(`h_${o.crop.height}`),i.push(`w_${o.crop.width}`),i.push(`x_${o.crop.x}`),i.push(`y_${o.crop.y}`)),o.rotate&&i.push(`a_${o.rotate}`),o.blurRadius&&i.push(`e_blur:${o.blurRadius}`),"outside"===o.fit?(i.push("c_fit"),o.width&&o.height?(i.push(`w_${Math.max(o.width,o.height)}`),i.push(`h_${Math.max(o.width,o.height)}`)):o.width?i.push(`w_${o.width}`):o.height&&i.push(`h_${o.height}`)):("contain"===o.fit?i.push("c_pad"):"cover"===o.fit?i.push("c_fill"):"fill"===o.fit?i.push("c_scale"):"inside"===o.fit&&i.push("c_fit"),o.width&&i.push(`w_${o.width}`),o.height&&i.push(`h_${o.height}`)),o.position&&i.push(`g_${n[o.position]||"center"}`),i.push(`q_${o.quality||"auto"}`),o.contentType?i.push("f_",o.contentType.replace("image/","").replace("jpeg","jpg")):i.push("f_auto");return`${t}${i.join(",")+"/"}${(e=>e.startsWith("/")?e.slice(1):e)(e)}`},exports.default=u,exports.imgixLoader=(e,t,o)=>{const n=new URL(`${t}${(e=>e.startsWith("/")?e.slice(1):e)(e)}`),i=n.searchParams;return o.width&&i.set("w",o.width.toString()),o.height&&i.set("h",o.height.toString()),o.background&&i.set("bg",numberToHex(o.background[3])+numberToHex(o.background[0])+numberToHex(o.background[1])+numberToHex(o.background[2])),o.crop&&i.set("rect",`${o.crop.x},${o.crop.y},${o.crop.width},${o.crop.height}`),"horizontal"===o.flip?i.set("flip","h"):"vertical"===o.flip?i.set("flip","v"):"both"===o.flip&&i.set("flip","hv"),o.rotate&&i.set("rot",o.rotate.toString()),o.blurRadius&&i.set("blur",o.blurRadius.toString()),"contain"===o.fit?i.set("fit","fill"):"cover"===o.fit?i.set("fit","crop"):"fill"===o.fit?i.set("fit","scale"):"inside"===o.fit?i.set("fit","fillmax"):"outside"===o.fit&&i.set("fit","max"),o.quality&&i.set("q",o.quality.toString()),o.contentType?i.set("format",o.contentType.replace("image/","").replace("jpeg","jpg")):i.set("auto","format"),n.href},exports.remixImageLoader=remixImageLoader,exports.useResponsiveImage=useResponsiveImage,exports.version="1.4.0";
//# sourceMappingURL=index.js.map
